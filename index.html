<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Offerwall GPT</title>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <style>
    body {
      background:#0b0f14;
      font-family: Arial;
      color:#fff;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
    }
    .box {
      background:#121826;
      padding:30px;
      border-radius:12px;
      width:360px;
      box-shadow:0 0 20px rgba(0,0,0,.6);
    }
    input, button {
      width:100%;
      padding:12px;
      margin-top:10px;
      border-radius:8px;
      border:none;
      font-size:15px;
    }
    button {
      background:#22c55e;
      color:#000;
      font-weight:bold;
      cursor:pointer;
    }
    .hidden { display:none; }
  </style>
</head>
<body>

<div id="login" class="box">
  <h2>Login / Register</h2>
  <input id="email" placeholder="Email address" />
  <button onclick="login()">Continue</button>
  <p style="opacity:.7;font-size:13px">No password Â· Email OTP</p>
</div>

<div id="dashboard" class="box hidden">
  <h2>Dashboard</h2>
  <p id="userEmail"></p>
  <button onclick="logout()">Logout</button>
</div>

<script>
  // ðŸ”¥ THAY 2 DÃ’NG NÃ€Y
  const SUPABASE_URL = "https://glejepbcpjcilxyrxxcg.supabase.co";
  const SUPABASE_ANON_KEY = "sb_publishable_kTKaL4ycqXhSIwGCx3ReNg_20dEKu1-";

  const supabase = supabase.createClient(
    SUPABASE_URL,
    SUPABASE_ANON_KEY
  );

  async function login() {
    const email = document.getElementById("email").value;
    if (!email) return alert("Nháº­p email");

    const { error } = await supabase.auth.signInWithOtp({
      email,
      options: {
        emailRedirectTo: window.location.href
      }
    });

    if (error) alert(error.message);
    else alert("Check email Ä‘á»ƒ Ä‘Äƒng nháº­p");
  }

  async function checkUser() {
    const { data } = await supabase.auth.getSession();
    if (data.session) {
      showDashboard(data.session.user);
    }
  }

  function showDashboard(user) {
    document.getElementById("login").classList.add("hidden");
    document.getElementById("dashboard").classList.remove("hidden");
    document.getElementById("userEmail").innerText =
      "Logged in as: " + user.email;
  }

  async function logout() {
    await supabase.auth.signOut();
    location.reload();
  }

  // ðŸ”‘ Láº®NG NGHE AUTH STATE (Cá»°C QUAN TRá»ŒNG)
  supabase.auth.onAuthStateChange((event, session) => {
    if (session) showDashboard(session.user);
  });

  checkUser();
</script>

</body>
</html>
